
package payload

import (
	"errors"
	"strconv"
)

func Get(payload_type string, payload_identifier string) (payload string,
	err error) {

	payloads, err := Dump(payload_type)
	if err != nil { return payload, err }

	payload_id, err := strconv.Atoi(payload_identifier)

	if err != nil {
		payload_name := payload_identifier
		payload, err = payloadDataByName(payload_name, payloads)
	} else {
		payload, err = payloadDataByID(payload_id, payloads)
	}

	return payload, err

}

func payloadDataByID(payload_id int, payloads []Payload) (payload string,
	err error) {

	for _, val := range payloads {

		if (val.ID == payload_id) {
			payload = val.Data
			return payload, err
		}

	}

	err = errors.New("payload not found")

	return payload, err

}

func payloadDataByName(payload_name string, payloads []Payload) (payload string,
	err error) {

	for _, val := range payloads {

		if (val.Name == payload_name) {
			payload = val.Data
			return payload, err
		}

	}

	err = errors.New("payload not found")
	
	return payload, err

}
